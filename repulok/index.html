
<!doctype html>
<meta charset="utf-8">

<!-- load D3js -->
<script src="//d3plus.org/js/d3.js"></script>

<!-- load D3plus after D3js -->
<script src="//d3plus.org/js/d3plus.js"></script>

<!-- create container element for visualization -->
<div id="viz"></div>

<style>
	@font-face {
		font-family: "Righteous";
		src: url(Righteous-Regular.ttf) format("truetype");
	}
</style>

<script>
  // sample data array

  d3.json("g_ro.json", function(error, data) {

  var sampleData = [
    {"a":"hcountry","b":"to","c":"from","d":"al"},
    {"b":"hcountry","a":"to","c":"from","d":"al"},
    {"c":"hcountry","b":"to","a":"from","d":"al"},
    {"d":"hcountry","b":"to","c":"from","d":"al"}
  ]
  var toggles = d3plus.form()
    .data(sampleData)
    .focus("hcountry")
    .id(["a","b","c","d"])
    .title("Nested Toggle")
    .type("toggle")
    .draw()

  // instantiate d3plus
  var ids=["type","hcountry","to","from","al", "ap"];
  var dep=1;
  var visualization = d3plus.viz()
    .container("#viz")     // container DIV to hold the visualization
    .type("bubbles")       // visualization type
    .size("heti járatszám")         // key name to size bubbles
    .color(function(d){
    	return d[ids[d.d3plus.depth]];
    })        // color by each group
    .font({"family":"Righteous","size":15,"align":"center","secondary":{"family":"Righteous"}})
    .legend(false)
    .ui({"value":[
    {
    	"method" : function(value){
    		dep=value;
    		visualization
    		.id(ids) // nesting keys
		    .depth(dep)
		    .draw()
    	},
    	"value"  :[{"Kevesebb":1}, {"Több":2} ],
    	"label" : "Részletek"
    },
    {
    	"method" : function(value){
    		ids=JSON.parse(value);;
    		visualization
    		.id(ids) // nesting keys
		    .depth(dep)
		    .draw()
    	},
    	"value"  : [ {"Values":'["type","hcountry","to","from","al", "ap"]'},{"Share":'["type","hcountry","from","to","al", "ap"]'}],
    	"label" : " "
    }
    ]})

  visualization
  	.data(data)     // data to use with the visualization
    .id(ids) // nesting keys
    .depth(dep)
    .draw()                // 0-based depth
    
})
</script>